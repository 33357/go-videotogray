<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8"> 
<title>菜鸟教程(runoob.com)</title> 
</head>
<body>

<canvas id="myCanvas" width="1920" height="1080" style="border:1px solid #c3c3c3;">
您的浏览器不支持 HTML5 canvas 标签。
</canvas>

<input type="file" id="file1" accept="*" />

<script type="text/javascript">
		var width=1920;
		var height=1080;
		var size=25;
        var file1 = document.getElementById('file1');
        file1.onchange = function () {
			var time=new Date();
            var file = file1.files[0];
			var c=document.getElementById("myCanvas");
			var ctx=c.getContext("2d");
            //读取为二进制
            var reader = new FileReader();
            reader.readAsArrayBuffer(file);
            reader.onload = function () {
				console.log(new Date()-time)
				let array = new Uint8Array(reader.result);
				var imgData=ctx.createImageData(width,height);
				for (var i=0;i<imgData.data.length;i+=4)
				{
					let color=array[i/4]*size
					imgData.data[i+0]=color;
					imgData.data[i+1]=color;
					imgData.data[i+2]=color;
					imgData.data[i+3]=255;
				}
				ctx.putImageData(imgData,0,0);
				ctx.font="30px Verdana";
				// 创建渐变
				var gradient=ctx.createLinearGradient(0,0,c.width,0);
				gradient.addColorStop("0","magenta");
				gradient.addColorStop("0.5","blue");
				gradient.addColorStop("1.0","red");
				// 用渐变填色
				ctx.fillStyle=gradient;
				ctx.fillText("w3school.com.cn",10,90);
				console.log(new Date()-time)
            }
        }
</script>

</body>
</html>